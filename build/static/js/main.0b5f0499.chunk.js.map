{"version":3,"sources":["services/email-providers/gmailProvider.js","services/email-providers/outlookProvider.js","services/email-providers/yahooProvider.js","services/email-providers/mailToProvider.js","services/email-providers/index.js","utils/hrefSanitizer.js","components/EmailButton/ImgOrLeft.js","components/EmailButton/EmailButton.js","components/EmailButton/index.js","components/EmailArray/EmailArray.js","components/EmailArray/index.js","components/CouncillorCard/CouncillorCard.js","utils/makeEmailCreatorFromCampaign.js","components/CouncillorCard/index.js","components/Loading/Loading.js","components/Loading/index.js","components/ClearButton/ClearButton.js","components/ClearButton/index.js","components/SearchBar/SearchBar.js","components/SearchBar/index.js","components/DebouncedSearchBar/index.js","enhancers/withDebouncedQueryChange.js","components/DebouncedSearchBar/DebouncedSearchBar.js","hooks/useCampaign.js","services/address2councillor.service.js","hooks/useCouncillor/index.js","hooks/useCouncillor/useCouncillor.js","App.js","utils/geolocationProvider.js","contexts/AuthContext.js","contexts/useAuth.js","hooks/useCampaigns.js","components/CcAddressesField.js","components/DeleteConfirm.js","components/Timeout.js","components/Campaign.js","components/Campaigns.js","components/Admin.js","components/Login.js","AdminApp.js","serviceWorker.js","index.js","imgs/gmail.ico","imgs/outlook.ico","imgs/yahoo.ico"],"names":["gmailProvider","name","src","gmailIcon","hrefResolver","email","cc","subject","body","outlookProvider","outlookIcon","emailTo","yahooProvider","yahooIcon","mailToProvider","left","className","commonEmailProviders","hrefSanitizer","rest","encodeURIComponent","defaultProps","alt","ImgOrLeft","width","height","href","onClick","undefined","EmailButton","color","target","rel","EmailArray","props","providers","emailArrayProps","map","provider","key","pipe","CouncillorCard","firstName","lastName","ward","role","phone","photoUrl","campaign","useState","setShowShareSheet","subtitle","when","startsWith","s","normalizeWard","always","makeEmailCreatorFromCampaign","emailCreator","emailBody","emailSubject","emailProviders","isMobile","variant","component","paragraph","ccAddresses","join","isLoading","size","children","Loading","thickness","ClearButton","onClearQuery","aria-label","label","query","autoFocus","onQueryChange","SimpleClearButton","SearchButton","Input","InputBase","SearchBar","elevation","autoComplete","placeholder","value","onChange","DebouncedSearchBar","debounceInMs","Component","Enhanced","setQuery","useDebouncedCallback","debouncedQueryChange","onNewValue","juxt","clearQuery","useCallback","e","withDebouncedQueryChange","campaignLoadingReducer","prevState","action","type","status","id","error","POSTAL_CODE_REGEX","sanitizeCanadianPostalCode","address","matches","exec","leftPart","rightPart","getCouncillorFromAddress","request","url","process","json","qs","useCouncillor","coords","latitude","longitude","councillor","setCouncillor","completedQuery","setCompletedQuery","onCouncillorLoaded","useMemo","useEffect","req","getCouncillorFromGeo","then","abort","geoLocatedConfig","positionOptions","enableHighAccuracy","timeout","userDecisionTimeout","geolocationProvider","navigator","geolocation","App","originalQuery","queryString","window","location","search","iframe","iframe_pls","useReducer","state","dispatch","didCancel","firebase","firestore","collection","doc","get","snapshot","exists","Error","data","catch","useCampaign","cid","campaignLoadError","classNames","document","title","gutterBottom","message","geolocated","AuthContext","React","createContext","AuthProvider","stateAndDispatch","authReducer","unsub","auth","onAuthStateChanged","user","signOut","Provider","useAuth","useContext","useCampaigns","campaigns","setCampaigns","db","unsubscribe","orderBy","where","uid","onSnapshot","querySnapshot","docs","add","authorUid","createdOn","FieldValue","serverTimestamp","console","updates","update","delete","withStyles","theme","chipsAdornment","alignSelf","maxHeight","marginBottom","spacing","unit","flexWrap","chip","marginRight","marginTop","input","paddingTop","inputIdle","paddingBottom","classes","inputValue","setInputValue","isFocus","setFocus","inputRef","useRef","hasExisting","length","showInput","margin","fullWidth","multiline","current","focus","onFocus","currentTarget","onBlur","addresses","split","trim","filter","arrayUnion","InputProps","inputProps","style","flexDirection","startAdornment","position","onDelete","arrayRemove","icon","onDeleteConfirmed","isAwaitingConfirm","setAwaitingConfirm","Timeout","show","onHide","duration","setTimeout","clearTimeout","card","minWidth","mixins","gutters","bullet","display","transform","fontSize","textContext","maxWidth","actions","alignItems","copiedTextContainer","flex","marginLeft","templateGreeting","templateClosing","shareableLink","origin","shareableLinkInputRef","remove","showCopied","setShowCopied","placement","endAdornment","select","execCommand","readOnly","stopPropagation","create","root","appBar","zIndex","drawer","grow","flexGrow","flexShrink","drawerPaper","emailDisplay","breakpoints","up","padding","toolbar","useRouteMatch","path","isCampaigns","from","to","paper","button","Link","selected","primary","content","exact","uiConfig","signInFlow","signInOptions","EmailAuthProvider","PROVIDER_ID","signInMethod","EMAIL_LINK_SIGN_IN_METHOD","Login","history","useHistory","useLocation","pathname","replace","firebaseAuth","PrivateRoute","render","Boolean","hostname","match","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","ReactDOM","getElementById","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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","file":"static/js/main.0b5f0499.chunk.js","sourcesContent":["import gmailIcon from '../../imgs/gmail.ico';\n\nconst hrefResolver = ({\n  email = '', cc = '', subject = '', body = '',\n}) => (\n  // Sep 19 2016 http://stackoverflow.com/a/8852679/\n  `https://mail.google.com/mail/?view=cm&fs=1&to=${email}&cc=${cc}&su=${subject}&body=${body}`\n);\n\nconst gmailProvider = {\n  name: 'Gmail',\n  src: gmailIcon,\n  hrefResolver,\n};\n\nexport default gmailProvider;\n","import outlookIcon from '../../imgs/outlook.ico';\n\nconst hrefResolver = ({\n  email = '', cc = '', subject = '', body = '',\n}) => (\n  // Apr 21 2019 https://blogs.msdn.microsoft.com/carloshm/2016/01/16/how-to-compose-a-new-message-or-event-and-populate-fields-in-office365/#comment-1645\n  // cc not support. Thanks Micro$0ft\n  `https://outlook.live.com/?path=/mail/action/compose&to=${emailTo(email, cc)}&subject=${subject}&body=${body}`\n);\n\nfunction emailTo(email, cc) {\n  if (!cc) return email;\n\n  return `${email},${cc}`;\n}\n\nconst outlookProvider = {\n  name: 'Outlook',\n  src: outlookIcon,\n  hrefResolver,\n};\n\nexport default outlookProvider;\n","import yahooIcon from '../../imgs/yahoo.ico';\n\nconst hrefResolver = ({\n  email = '', cc = '', subject = '', body = '',\n}) => (\n  // Sep 19 2016 http://stackoverflow.com/a/30106907/1578294\n  `https://compose.mail.yahoo.com/?to=${email}&cc=${cc}&subject=${subject}&body=${body}`\n);\n\nconst yahooProvider = {\n  name: 'Yahoo',\n  src: yahooIcon,\n  hrefResolver,\n};\n\nexport default yahooProvider;\n","import EmailIcon from '@material-ui/icons/Email';\nimport React from 'react';\n\nconst hrefResolver = ({\n  email = '', cc = '', subject = '', body = '',\n}) => (\n  `mailto:${email}?subject=${subject}&body=${body}&cc=${cc}`\n);\n\nconst mailToProvider = {\n  name: 'Mail app',\n  left: <EmailIcon className=\"left-icon\" />,\n  hrefResolver,\n};\n\nexport default mailToProvider;\n","import gmailProvider from './gmailProvider';\nimport outlookProvider from './outlookProvider';\nimport yahooProvider from './yahooProvider';\nimport mailToProvider from './mailToProvider';\n\nexport { gmailProvider };\nexport { outlookProvider };\nexport { yahooProvider };\nexport { mailToProvider };\n\nconst commonEmailProviders = [gmailProvider, outlookProvider, yahooProvider];\nexport default commonEmailProviders;\n","const hrefSanitizer = ({ subject = '', body = '', ...rest }) => ({\n  subject: encodeURIComponent(subject),\n  body: encodeURIComponent(body),\n  ...rest,\n});\n\nexport default hrefSanitizer;\n","import React from 'react';\nimport * as PropTypes from 'prop-types';\n\nconst propTypes = {\n  src: PropTypes.string,\n  alt: PropTypes.string,\n  left: PropTypes.node,\n};\n\nconst defaultProps = {\n  src: '',\n  alt: '',\n  left: <></>,\n};\n\nconst ImgOrLeft = ({ src, alt, left }) => (\n  src\n    ? (\n      <img\n        className=\"left-icon button-img\"\n        width={24}\n        height={24}\n        src={src}\n        alt={alt}\n      />\n    )\n    : left\n);\n\nImgOrLeft.propTypes = propTypes;\nImgOrLeft.defaultProps = defaultProps;\n\nexport default ImgOrLeft;\n","import Button from '@material-ui/core/Button';\nimport * as PropTypes from 'prop-types';\nimport React from 'react';\nimport './EmailButton.css';\nimport ImgOrLeft from './ImgOrLeft';\n\nconst propTypes = {\n  name: PropTypes.string,\n  src: PropTypes.string,\n  href: PropTypes.string,\n  left: PropTypes.node,\n  onClick: PropTypes.func,\n};\n\nconst defaultProps = {\n  name: '',\n  src: '',\n  href: '',\n  left: <></>,\n  onClick: undefined,\n};\n\nconst EmailButton = ({\n  name, src, href, left, onClick,\n}) => (\n  <Button\n    color=\"primary\"\n    href={href}\n    target=\"_blank\"\n    rel=\"noopener noreferrer\"\n    onClick={onClick}\n  >\n    <ImgOrLeft src={src} alt={name} left={left} />\n    <span>{name}</span>\n  </Button>\n);\n\nEmailButton.propTypes = propTypes;\nEmailButton.defaultProps = defaultProps;\n\nexport default EmailButton;\n","import EmailButton from './EmailButton';\n\nexport default EmailButton;\n","import { pipe } from 'ramda';\nimport React from 'react';\nimport hrefSanitizer from '../../utils/hrefSanitizer';\nimport EmailButton from '../EmailButton';\n\n\nfunction EmailArray(props) {\n  const { providers, ...emailArrayProps } = props;\n  return providers.map((provider) => {\n    const { hrefResolver, name, ...rest } = provider;\n    return (\n      <EmailButton\n        key={name}\n        name={name}\n        href={pipe(hrefSanitizer, hrefResolver)(emailArrayProps)}\n        {...emailArrayProps}\n        {...rest}\n      />\n    );\n  });\n}\n\nexport default EmailArray;\n","import EmailArray from './EmailArray';\n\nexport default EmailArray;\n","import { Divider } from '@material-ui/core';\nimport Button from '@material-ui/core/Button';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Paper from '@material-ui/core/Paper';\nimport Typography from '@material-ui/core/Typography';\nimport CallIcon from '@material-ui/icons/Call';\nimport * as PropTypes from 'prop-types';\nimport { always, startsWith, when } from 'ramda';\nimport React, { useState } from 'react';\nimport { isMobile } from 'react-device-detect';\nimport commonEmailProviders, { mailToProvider } from '../../services/email-providers';\nimport makeEmailCreatorFromCampaign from '../../utils/makeEmailCreatorFromCampaign';\nimport EmailArray from '../EmailArray';\nimport ShareSheet from '../ShareSheet/ShareSheet';\nimport './CouncillorCard.css';\n\nconst defaultPhotoUrl = 'https://www.edmonton.ca/city_government/documents/Mayor-Headshot_800x494_rdax_500x309.jpg';\n\nconst propTypes = {\n  firstName: PropTypes.string,\n  lastName: PropTypes.string,\n  ward: PropTypes.string,\n  role: PropTypes.string,\n  phone: PropTypes.string,\n  email: PropTypes.string,\n  photoUrl: PropTypes.string,\n};\n\nconst defaultProps = {\n  firstName: '',\n  lastName: '',\n  ward: '',\n  role: '',\n  phone: '',\n  email: '',\n  photoUrl: defaultPhotoUrl,\n};\n\nconst shareSheetEnabled = false;\n\nconst CouncillorCard = ({\n  firstName, lastName, ward, role, phone, email, photoUrl, campaign,\n}) => {\n  const [showShareSheet, setShowShareSheet] = useState(false);\n  const name = `${firstName} ${lastName}`;\n  const subtitle = when(startsWith('Councillor'), s => `${s} â€“ ${ward}`)(role);\n  const normalizeWard = when(startsWith('City'), always('Edmonton'));\n\n  const emailCreator = makeEmailCreatorFromCampaign(campaign);\n  const [emailBody, emailSubject] = emailCreator({\n    role,\n    lastName,\n    ward: normalizeWard(ward),\n  });\n  const emailProviders = isMobile\n    ? [mailToProvider, ...commonEmailProviders]\n    : [...commonEmailProviders, mailToProvider];\n\n  return (\n    <Paper>\n      <div className=\"contact\">\n        <img\n          className=\"image\"\n          src={photoUrl}\n          alt={name}\n        />\n        <CardContent className=\"text-content\">\n          <Typography variant=\"h5\" component=\"h2\">\n            {name}\n          </Typography>\n          <Typography color=\"textSecondary\" paragraph>\n            {subtitle}\n          </Typography>\n          <Typography component=\"pre\" className=\"template\">\n            {emailBody}\n          </Typography>\n        </CardContent>\n      </div>\n      <Divider />\n      <CardActions>\n        <div className=\"email-array\">\n          <EmailArray\n            email={email}\n            subject={emailSubject}\n            body={emailBody}\n            cc={campaign.ccAddresses && campaign.ccAddresses.join(',')}\n            providers={emailProviders}\n            onClick={() => setShowShareSheet(true)}\n          />\n          <Button color=\"primary\" href={`tel:${phone}`}>\n            <CallIcon className=\"left-icon\" />\n            Call\n          </Button>\n        </div>\n      </CardActions>\n      {shareSheetEnabled && showShareSheet && (\n        <>\n          <Divider />\n          <CardContent>\n            <ShareSheet />\n          </CardContent>\n        </>\n      )}\n    </Paper>\n  );\n};\n\nCouncillorCard.propTypes = propTypes;\nCouncillorCard.defaultProps = defaultProps;\n\nexport default CouncillorCard;\n","\nexport default function makeEmailCreatorFromCampaign({ body, subject }) {\n  return function emailCreator({ role = 'Mayor', lastName = 'Iveson', ward = '' }) {\n    const textBody = `Hello ${role} ${lastName},\n\n${body}\nConstituent from ${ward || 'Edmonton'}`;\n\n    return [textBody, subject];\n  };\n}\n","import CouncillorCard from './CouncillorCard';\n\nexport default CouncillorCard;\n","import React from 'react';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport * as PropTypes from 'prop-types';\n\nconst propTypes = {\n  isLoading: PropTypes.bool,\n  size: PropTypes.number,\n  className: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.arrayOf(PropTypes.string),\n  ]),\n  children: PropTypes.node,\n};\n\nconst defaultProps = {\n  isLoading: false,\n  size: 24,\n  className: '',\n  children: <></>,\n};\n\nconst Loading = ({\n  isLoading, size, className, children,\n}) => (isLoading\n  ? <CircularProgress size={size} thickness={4.8} className={className} />\n  : children);\n\nLoading.propTypes = propTypes;\nLoading.defaultProps = defaultProps;\n\nexport default Loading;\n","import Loading from './Loading';\n\nexport default Loading;\n","import React from 'react';\nimport IconButton from '@material-ui/core/IconButton/index';\nimport ClearIcon from '@material-ui/icons/Clear';\nimport { always } from 'ramda';\nimport * as PropTypes from 'prop-types';\n\nconst ClearButton = ({ onClearQuery }) => (\n  <IconButton aria-label=\"Clear\" onClick={onClearQuery}>\n    <ClearIcon />\n  </IconButton>\n);\nClearButton.propTypes = {\n  onClearQuery: PropTypes.func,\n};\nClearButton.defaultProps = {\n  onClearQuery: always,\n};\n\nexport default ClearButton;\n","import ClearButton from './ClearButton';\n\nexport default ClearButton;\n","import React from 'react';\nimport Paper from '@material-ui/core/Paper/index';\nimport IconButton from '@material-ui/core/IconButton/index';\nimport InputBase from '@material-ui/core/InputBase/index';\nimport SearchIcon from '@material-ui/icons/Search';\nimport './SearchBar.css';\nimport { always } from 'ramda';\nimport * as PropTypes from 'prop-types';\nimport Loading from '../Loading';\nimport SimpleClearButton from '../ClearButton';\n\nconst PlaceboSearchButton = () => (\n  <IconButton aria-label=\"Search\">\n    <SearchIcon />\n  </IconButton>\n);\n\nconst propTypes = {\n  label: PropTypes.string,\n  query: PropTypes.string,\n  isLoading: PropTypes.bool,\n  autoFocus: PropTypes.bool,\n  onQueryChange: PropTypes.func,\n  onClearQuery: PropTypes.func,\n  ClearButton: PropTypes.elementType,\n  SearchButton: PropTypes.elementType,\n  Input: PropTypes.elementType,\n};\n\nconst defaultProps = {\n  label: '',\n  query: '',\n  isLoading: false,\n  autoFocus: true,\n  onQueryChange: always,\n  onClearQuery: always,\n  ClearButton: SimpleClearButton,\n  SearchButton: PlaceboSearchButton,\n  Input: InputBase,\n};\n\nconst SearchBar = ({\n  label, query, isLoading, autoFocus, onQueryChange, onClearQuery, ClearButton, SearchButton, Input,\n}) => (\n  <Paper className=\"root\" elevation={1}>\n    <Input\n      autoComplete=\"postal-code\"\n      className=\"input\"\n      autoFocus={autoFocus}\n      placeholder={label}\n      value={query}\n      onChange={onQueryChange}\n    />\n    <Loading isLoading={isLoading} className=\"loading\">\n      {query\n        ? <ClearButton onClearQuery={onClearQuery} />\n        : <SearchButton />\n      }\n    </Loading>\n  </Paper>\n);\n\nSearchBar.propTypes = propTypes;\nSearchBar.defaultProps = defaultProps;\n\nexport default SearchBar;\n","import SearchBar from './SearchBar';\n\nexport default SearchBar;\n","import DebouncedSearchBar from './DebouncedSearchBar';\n\nexport default DebouncedSearchBar;\n","import React, { useCallback, useState } from 'react';\nimport { useDebouncedCallback } from 'use-debounce';\nimport { always, juxt } from 'ramda';\nimport * as PropTypes from 'prop-types';\n\nconst withDebouncedQueryChange = ({ debounceInMs }) => (Component) => {\n  const Enhanced = ({ onQueryChange, ...rest }) => {\n    const [query, setQuery] = useState('');\n    const [debouncedQueryChange] = useDebouncedCallback(onQueryChange, debounceInMs);\n    const onNewValue = juxt([setQuery, debouncedQueryChange]);\n    const clearQuery = useCallback(() => onNewValue(''), [onNewValue]);\n    const onChange = useCallback(e => onNewValue(e.target.value), [onNewValue]);\n\n    return (\n      <Component\n        query={query}\n        onQueryChange={onChange}\n        onClearQuery={clearQuery}\n        {...rest}\n      />\n    );\n  };\n  Enhanced.propTypes = {\n    onQueryChange: PropTypes.func,\n  };\n  Enhanced.defaultProps = {\n    onQueryChange: always,\n  };\n  return Enhanced;\n};\n\nexport default withDebouncedQueryChange;\n","import SearchBar from '../SearchBar';\nimport withDebouncedQueryChange from '../../enhancers/withDebouncedQueryChange';\n\nexport default withDebouncedQueryChange({ debounceInMs: 300 })(SearchBar);\n","import firebase from 'firebase';\nimport { useEffect, useReducer } from 'react';\n\nexport default function useCampaign(id) {\n  const [state, dispatch] = useReducer(campaignLoadingReducer, { status: 'idle' });\n\n  useEffect(() => dispatch({ type: 'startLoading', id }), [id]);\n\n  useEffect(() => {\n    if (state.status !== 'loading') return;\n\n    let didCancel = false;\n\n    const db = firebase.firestore();\n    db.collection('campaigns').doc(state.id).get()\n      .then((snapshot) => {\n        if (didCancel) return;\n\n        if (!snapshot.exists) {\n          throw new Error('Cannot find email template. Please check that the link is update to date.');\n        }\n        dispatch({ type: 'campaignLoaded', campaign: snapshot.data() });\n      })\n      .catch((error) => {\n        if (didCancel) return;\n\n        dispatch({ type: 'loadFailed', error });\n      });\n\n    return () => didCancel = true;\n  }, [state]);\n\n  return [state.campaign, state.error];\n}\n\nfunction campaignLoadingReducer(prevState, action) {\n  switch (action.type) {\n    case 'startLoading':\n      return { status: 'loading', id: action.id };\n    case 'campaignLoaded':\n      return { status: 'loaded', campaign: action.campaign };\n    case 'loadFailed':\n      return { status: 'error', error: action.error };\n    default:\n      return prevState;\n  }\n}\n","import request from 'request-promise-native';\n\nconst POSTAL_CODE_REGEX = /^\\s*([A-Za-z]\\d[A-Za-z])[ -]?(\\d[A-Za-z]\\d)\\s*$/i;\n\n// google API treats \"T5G0M5\" and \"T5G 0M5\" differently\n// if `address` is a postal code, this fn ensures a space is between two parts\nfunction sanitizeCanadianPostalCode(address) {\n  const matches = POSTAL_CODE_REGEX.exec(address);\n  if (!matches) return address;\n\n  const [, leftPart, rightPart] = matches;\n  return `${leftPart} ${rightPart}`;\n}\n\nexport const getCouncillorFromAddress = (address = '') => request({\n  url: `${process.env.REACT_APP_ADDRESS_SERVER_HOST}/address2councillor`,\n  json: true,\n  qs: {\n    address: sanitizeCanadianPostalCode(address),\n  },\n});\n\nexport const getCouncillorFromGeo = ({ latitude = 0, longitude = 0 }) => (\n  getCouncillorFromAddress(`geo: lng: ${longitude}, lat: ${latitude}`)\n);\n","import useCouncillor from './useCouncillor';\n\nexport default useCouncillor;\n","import { useEffect, useState, useMemo } from 'react';\nimport { pipe } from 'ramda';\nimport { getCouncillorFromAddress, getCouncillorFromGeo } from '../../services/address2councillor.service';\n\nconst useCouncillor = ({ address = '', coords = { latitude: 0, longitude: 0 } }) => {\n  const [councillor, setCouncillor] = useState(undefined);\n  const [completedQuery, setCompletedQuery] = useState(undefined);\n\n  const onCouncillorLoaded = useMemo(() => pipe(\n    setCouncillor,\n    () => setCompletedQuery(address),\n  ), [setCouncillor, setCompletedQuery, address]);\n\n  useEffect(() => {\n    const req = coords && !address\n      ? getCouncillorFromGeo(coords)\n      : getCouncillorFromAddress(address);\n    req.then(onCouncillorLoaded);\n    return () => req.abort();\n  }, [address, coords, onCouncillorLoaded]);\n  return [councillor, completedQuery];\n};\n\nexport default useCouncillor;\n","import { Typography } from '@material-ui/core';\nimport CssBaseline from '@material-ui/core/CssBaseline';\nimport classNames from 'classnames';\nimport * as PropTypes from 'prop-types';\nimport * as queryString from 'query-string';\nimport React, { useEffect, useState } from 'react';\nimport { geolocated } from 'react-geolocated';\nimport './App.css';\nimport CouncillorCard from './components/CouncillorCard';\nimport DebouncedSearchBar from './components/DebouncedSearchBar';\nimport useCampaign from './hooks/useCampaign';\nimport useCouncillor from './hooks/useCouncillor';\nimport geolocationProvider from './utils/geolocationProvider';\n\nconst geoLocatedConfig = {\n  positionOptions: {\n    enableHighAccuracy: false,\n    timeout: 5000,\n  },\n  userDecisionTimeout: 5000,\n  geolocationProvider,\n};\n\nconst propTypes = {\n  coords: PropTypes.shape({\n    latitude: PropTypes.number,\n    longitude: PropTypes.number,\n  }),\n};\n\nconst defaultProps = {\n  coords: undefined,\n};\n\nconst App = ({ coords }) => {\n  const [query, setQuery] = useState('');\n  const [councillor, originalQuery] = useCouncillor({ address: query, coords });\n  // eslint-disable-next-line camelcase\n  const { iframe_pls: iframe, cid } = queryString.parse(window.location.search);\n  const campaignId = cid || 'core_zone';\n\n  const [campaign, campaignLoadError] = useCampaign(campaignId);\n\n  const className = classNames(\n    'app',\n    { 'iframe-pls': iframe },\n  );\n\n  useEffect(() => {\n    if (!campaign) return;\n\n    document.title = campaign.subject;\n  }, [campaign]);\n\n  return (\n    <div className={className}>\n      <CssBaseline />\n      <DebouncedSearchBar\n        label=\"Find your councillor by postal code/address\"\n        onQueryChange={setQuery}\n        isLoading={query !== originalQuery}\n        autoFocus={!iframe}\n      />\n      <Typography gutterBottom />\n      {campaignLoadError && <Typography variant=\"subtitle1\" color=\"error\">{campaignLoadError.message}</Typography>}\n      {councillor && campaign && <CouncillorCard {...councillor} campaign={campaign} />}\n    </div>\n  );\n};\n\nApp.propTypes = propTypes;\nApp.defaultProps = defaultProps;\n\nexport default geolocated(geoLocatedConfig)(App);\n","const geolocationProvider = typeof navigator !== 'undefined' && navigator.geolocation;\n\nexport default geolocationProvider;\n","import firebase from 'firebase';\nimport React, { useEffect, useReducer } from 'react';\n\nconst AuthContext = React.createContext({});\nexport default AuthContext;\n\nexport function AuthProvider({ children }) {\n  const stateAndDispatch = useReducer(authReducer, { status: 'signedOut' });\n  const [state, dispatch] = stateAndDispatch;\n\n  useEffect(() => {\n    const unsub = firebase.auth().onAuthStateChanged((user) => {\n      if (user) {\n        dispatch({ type: 'signInCompleted', user });\n      } else {\n        dispatch({ type: 'signOutCompleted' });\n      }\n    });\n\n    return () => unsub();\n  }, [dispatch]);\n\n  useEffect(() => {\n    if (state.status !== 'signingOut') return;\n\n    firebase.auth().signOut();\n  }, [state.status]);\n\n  return (\n    <AuthContext.Provider value={stateAndDispatch}>\n      {children}\n    </AuthContext.Provider>\n  );\n}\n\nfunction authReducer(prevState, action) {\n  switch (action.type) {\n    case 'signInCompleted':\n      return { ...prevState, status: 'signedIn', user: action.user };\n    case 'signOut':\n      return { ...prevState, status: 'signingOut' };\n    case 'signOutCompleted':\n      return { ...prevState, status: 'signedOut', user: undefined };\n    default:\n      return prevState;\n  }\n}\n","import { useContext } from 'react';\nimport AuthContext from './AuthContext';\n\nexport default function useAuth() {\n  const [{ user }, dispatch] = useContext(AuthContext);\n\n  return [user, () => dispatch({ type: 'signOut' })];\n}\n","\nimport firebase from 'firebase';\nimport { useEffect, useState } from 'react';\nimport useAuth from '../contexts/useAuth';\n\nconst defaultBody = `I want safe and liveable streets.\n\nVote YES to slower streets in Edmonton's neighbourhoods.\n\nSincerely,`;\n\nexport default function useCampaigns() {\n  const [user] = useAuth();\n  const [campaigns, setCampaigns] = useState();\n  const db = firebase.firestore();\n\n  useEffect(() => {\n    const unsubscribe = db.collection('campaigns')\n      .orderBy('createdOn')\n      .where('authorUid', '==', user.uid)\n      .onSnapshot((querySnapshot) => {\n        setCampaigns(querySnapshot.docs);\n      });\n\n    return () => unsubscribe();\n  }, [db, user.uid]);\n\n  function update(id, updates) {\n    db.collection('campaigns').doc(id).update(updates).catch((e) => {\n      console.error(e);\n    });\n  }\n\n  function create() {\n    db.collection('campaigns').add({\n      authorUid: user.uid,\n      createdOn: firebase.firestore.FieldValue.serverTimestamp(),\n      subject: '',\n      body: defaultBody,\n      ccAddresses: ['council@edmonton.ca', 'city.clerk@edmonton.ca'],\n    }).catch((e) => {\n      console.error(e);\n    });\n  }\n\n  function remove(id) {\n    db.collection('campaigns').doc(id).delete().catch((e) => {\n      console.error(e);\n    });\n  }\n\n  return [campaigns, create, update, remove];\n}\n","import {\n  Chip, InputAdornment, TextField, withStyles,\n} from '@material-ui/core';\nimport classNames from 'classnames';\nimport firebase from 'firebase';\nimport React, { useEffect, useRef, useState } from 'react';\n\nconst styles = (theme => ({\n  chipsAdornment: {\n    alignSelf: 'start',\n    height: 'auto',\n    maxHeight: 'initial',\n    marginBottom: theme.spacing.unit,\n    flexWrap: 'wrap',\n  },\n  chip: {\n    marginRight: theme.spacing.unit / 2,\n    marginTop: theme.spacing.unit / 2,\n  },\n  input: {\n    paddingTop: theme.spacing.unit,\n  },\n  inputIdle: {\n    paddingBottom: theme.spacing.unit,\n  },\n}));\n\nfunction CcAddressesField({ classes, ccAddresses, update }) {\n  const [inputValue, setInputValue] = useState('');\n  const [isFocus, setFocus] = useState(false);\n  const inputRef = useRef();\n  const hasExisting = ccAddresses && ccAddresses.length > 0;\n  const showInput = !hasExisting || isFocus;\n\n  useEffect(() => {\n    if (ccAddresses && ccAddresses.length) return;\n\n    setInputValue('');\n  }, [ccAddresses]);\n\n  return (\n    <>\n      <TextField\n        label=\"CC\"\n        margin=\"normal\"\n        variant=\"outlined\"\n        placeholder=\"e.g. council@edmonton.ca, city.clerk@edmonton.ca\"\n        fullWidth\n        multiline\n        inputRef={inputRef}\n        value={inputValue}\n        onClick={() => inputRef.current.focus()}\n        onFocus={() => setFocus(true)}\n        onChange={e => setInputValue(e.currentTarget.value)}\n        onBlur={onInputBlur}\n        InputProps={{\n          className: classNames({\n            [classes.input]: hasExisting,\n            [classes.inputIdle]: hasExisting && !showInput,\n          }),\n          inputProps: showInput ? undefined : { style: { height: 0 } },\n          style: { flexDirection: 'column' },\n          startAdornment: hasExisting && (\n            <InputAdornment position=\"start\" className={classes.chipsAdornment} style={showInput ? undefined : { marginBottom: 0 }}>\n              <>\n                {ccAddresses.map(address => (\n                  <Chip\n                    key={address}\n                    label={address}\n                    onDelete={handleDelete(address)}\n                    className={classes.chip}\n                  />\n                ))}\n              </>\n            </InputAdornment>\n          ),\n        }}\n      />\n    </>\n  );\n\n  function handleDelete(email) {\n    return () => {\n      update({\n        ccAddresses: firebase.firestore.FieldValue.arrayRemove(email),\n      });\n    };\n  }\n\n  function onInputBlur() {\n    setFocus(false);\n    setInputValue('');\n\n    const addresses = inputValue.split(',').map(e => e.trim()).filter(e => !!e);\n    if (!addresses.length) return;\n\n    setInputValue(' ');\n    update({\n      ccAddresses: firebase.firestore.FieldValue.arrayUnion(...addresses),\n    });\n  }\n}\n\nexport default withStyles(styles)(CcAddressesField);\n","import { Button, IconButton, withStyles } from '@material-ui/core';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport DeleteForeverIcon from '@material-ui/icons/DeleteForever';\nimport React, { useState } from 'react';\n\n\nconst styles = theme => ({\n  icon: {\n    marginRight: theme.spacing.unit * 0.5,\n  },\n});\n\nfunction DeleteConfirm({ onDeleteConfirmed, classes }) {\n  const [isAwaitingConfirm, setAwaitingConfirm] = useState(false);\n  return (\n    <>\n      {\n      isAwaitingConfirm\n        ? (\n          <>\n            <Button aria-label=\"Cancel\" onClick={() => setAwaitingConfirm(false)}>\n            Cancel\n            </Button>\n            <Button aria-label=\"Confirm delete\" color=\"secondary\" onClick={onDeleteConfirmed}>\n              <DeleteForeverIcon className={classes.icon} />\n            Delete\n            </Button>\n          </>\n        )\n        : (\n          <>\n            <IconButton aria-label=\"Delete\" onClick={() => setAwaitingConfirm(true)}>\n              <DeleteIcon />\n            </IconButton>\n          </>\n        )\n    }\n    </>\n  );\n}\n\nexport default withStyles(styles)(DeleteConfirm);\n","import React, { useEffect } from 'react';\n\nfunction Timeout({\n  show, onHide, duration = 3000, children,\n}) {\n  useEffect(() => {\n    if (!show) return;\n\n    const id = setTimeout(() => onHide && onHide(), duration);\n\n    return () => clearTimeout(id);\n  }, [show, onHide, duration]);\n\n  return (\n    <>\n      {show && children}\n    </>\n  );\n}\n\nexport default Timeout;\n","import {\n  IconButton, InputAdornment, TextField, Tooltip, Typography,\n} from '@material-ui/core';\nimport Paper from '@material-ui/core/Paper';\nimport { withStyles } from '@material-ui/core/styles';\nimport DoneIcon from '@material-ui/icons/Done';\nimport OpenTabIcon from '@material-ui/icons/OpenInNew';\nimport React, { useRef, useState } from 'react';\nimport useCampaigns from '../hooks/useCampaigns';\nimport CcAddressesField from './CcAddressesField';\nimport DeleteConfirm from './DeleteConfirm';\nimport Timeout from './Timeout';\n\n\nconst styles = theme => ({\n  card: {\n    minWidth: 275,\n    marginBottom: theme.spacing.unit * 4,\n\n    ...theme.mixins.gutters(),\n    paddingTop: theme.spacing.unit * 2,\n    paddingBottom: theme.spacing.unit * 2,\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  textContext: {\n    maxWidth: '45em',\n  },\n  icon: {\n    marginRight: theme.spacing.unit * 0.5,\n  },\n  actions: { display: 'flex', alignItems: 'end', marginTop: theme.spacing.unit * 2 },\n  copiedTextContainer: {\n    flex: 1,\n    alignItems: 'baseline',\n    alignSelf: 'baseline',\n    display: 'flex',\n    flexDirection: 'row',\n    marginLeft: theme.spacing.unit,\n  },\n  templateGreeting: { alignSelf: 'start', height: 'auto', marginBottom: theme.spacing.unit * 2 },\n  templateClosing: {\n    alignSelf: 'end', height: 'auto', marginLeft: 0, marginTop: theme.spacing.unit * 2,\n  },\n});\n\nfunction Campaign(props) {\n  const {\n    classes, id, subject, body, ccAddresses,\n  } = props;\n  const shareableLink = `${window.location.origin}/email-contact/?cid=${id}`;\n  const shareableLinkInputRef = useRef();\n  const [, , update, remove] = useCampaigns();\n  const [showCopied, setShowCopied] = useState(false);\n\n  return (\n    <div key={id}>\n      <Paper className={classes.card} elevation={1}>\n        <TextField\n          label=\"Subject\"\n          margin=\"normal\"\n          variant=\"outlined\"\n          fullWidth\n          value={subject}\n          onChange={e => update(id, { subject: e.target.value })}\n        />\n        <CcAddressesField ccAddresses={ccAddresses} update={updates => update(id, updates)} />\n        <TextField\n          label=\"Body template\"\n          multiline\n          margin=\"normal\"\n          variant=\"outlined\"\n          fullWidth\n          value={body}\n          onChange={e => update(id, { body: e.target.value })}\n          InputProps={{\n            style: { flexDirection: 'column' },\n            startAdornment: (\n              <InputAdornment position=\"start\" className={classes.templateGreeting}>\n                <Tooltip title=\"automatically updated in live mode\" placement=\"right\">\n                  <Typography variant=\"body1\" color=\"textSecondary\">Hello Councillor Knack,</Typography>\n                </Tooltip>\n              </InputAdornment>\n            ),\n            endAdornment: (\n              <InputAdornment position=\"end\" className={classes.templateClosing}>\n                <Tooltip title=\"automatically updated in live mode\" placement=\"right\">\n                  <Typography variant=\"body1\" color=\"textSecondary\">Constituent from Ward 1</Typography>\n                </Tooltip>\n              </InputAdornment>\n            ),\n          }}\n        />\n\n        <div className={classes.actions}>\n          <TextField\n            variant=\"standard\"\n            type=\"url\"\n            label=\"Shareable link\"\n            value={shareableLink}\n            inputRef={shareableLinkInputRef}\n            onClick={() => {\n              shareableLinkInputRef.current.focus();\n              shareableLinkInputRef.current.select();\n              if (!document.execCommand('copy')) return;\n\n              setShowCopied([]);\n            }}\n            InputProps={{\n              readOnly: true,\n              endAdornment: (\n                <InputAdornment position=\"end\">\n                  <IconButton href={shareableLink} target=\"_blank\" rel=\"noreferrer noopener\" onClick={e => e.stopPropagation()} aria-label=\"preview in new tab\">\n                    <OpenTabIcon />\n                  </IconButton>\n                </InputAdornment>\n              ),\n            }}\n            style={{ flex: 3, alignSelf: 'baseline' }}\n            fullWidth\n          />\n          <div className={classes.copiedTextContainer}>\n            <Timeout show={showCopied} onHide={() => setShowCopied(false)}>\n              <DoneIcon fontSize=\"small\" color=\"primary\" style={{ alignSelf: 'center', marginBottom: 4 }} />\n              <Typography variant=\"overline\" color=\"primary\">Copied!</Typography>\n            </Timeout>\n          </div>\n          <DeleteConfirm onDeleteConfirmed={() => remove(id)} />\n        </div>\n      </Paper>\n    </div>\n  );\n}\n\nexport default withStyles(styles)(Campaign);\n","import Button from '@material-ui/core/Button';\nimport { withStyles } from '@material-ui/core/styles';\nimport AddIcon from '@material-ui/icons/Add';\nimport React from 'react';\nimport useCampaigns from '../hooks/useCampaigns';\nimport Campaign from './Campaign';\n\n\nconst styles = theme => ({\n  card: {\n    minWidth: 275,\n    ...theme.mixins.gutters(),\n    paddingTop: theme.spacing.unit * 2,\n    paddingBottom: theme.spacing.unit,\n  },\n  bullet: {\n    display: 'inline-block',\n    margin: '0 2px',\n    transform: 'scale(0.8)',\n  },\n  title: {\n    fontSize: 14,\n  },\n  textContext: {\n    maxWidth: '45em',\n  },\n  icon: {\n    marginRight: theme.spacing.unit * 0.5,\n  },\n  actions: { display: 'flex', alignItems: 'center', marginTop: theme.spacing.unit * 2 },\n});\n\nfunction Campaigns(props) {\n  const { classes } = props;\n  const [campaigns, create] = useCampaigns();\n\n  if (!campaigns) return <>Loadingâ€¦</>;\n\n  return (\n    <div className={classes.textContext}>\n      {campaigns.map((snapshot) => {\n        const campaign = snapshot.data();\n        return <Campaign key={snapshot.id} id={snapshot.id} {...campaign} />;\n      })}\n      <Button fullWidth variant=\"outlined\" color=\"primary\" onClick={create}>\n        <AddIcon className={classes.icon} />\n        <span>Add new campign</span>\n      </Button>\n    </div>\n  );\n}\n\nexport default withStyles(styles)(Campaigns);\n","import AppBar from '@material-ui/core/AppBar';\nimport Button from '@material-ui/core/Button';\nimport Drawer from '@material-ui/core/Drawer';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport { withStyles } from '@material-ui/core/styles';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport DraftsIcon from '@material-ui/icons/Drafts';\nimport React from 'react';\nimport {\n  Link, Redirect, Route, Switch, useRouteMatch,\n} from 'react-router-dom';\nimport useAuth from '../contexts/useAuth';\nimport Campaigns from './Campaigns';\n\n\nconst drawerWidth = 240;\nconst styles = theme => ({\n  root: {\n    display: 'flex',\n  },\n  appBar: {\n    zIndex: theme.zIndex.drawer + 1,\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  drawer: {\n    width: 0,\n    flexShrink: 0,\n  },\n  drawerPaper: {\n    width: 0,\n  },\n  emailDisplay: {\n    display: 'none',\n  },\n  [theme.breakpoints.up('md')]: {\n    drawer: {\n      width: drawerWidth,\n    },\n    drawerPaper: {\n      width: drawerWidth,\n    },\n    emailDisplay: {\n      display: 'inline-block',\n    },\n  },\n  [theme.breakpoints.up('sm')]: {\n    emailDisplay: {\n      display: 'inline-block',\n    },\n  },\n  content: {\n    flexGrow: 1,\n    padding: theme.spacing.unit * 3,\n  },\n  toolbar: theme.mixins.toolbar,\n});\n\nfunction Admin(props) {\n  const [user, signOut] = useAuth();\n  if (!user) throw new Error('protected route');\n\n  const { classes } = props;\n  const { path, url } = useRouteMatch();\n  const isCampaigns = !!useRouteMatch(`${path}/campaigns`);\n\n  return (\n    <>\n      <Redirect from={path} to={`${path}/campaigns`} />\n      <div className={classes.root}>\n        <AppBar position=\"fixed\" className={classes.appBar}>\n          <Toolbar>\n            <Typography variant=\"h6\" color=\"inherit\" className={classes.grow}>\n            Email Campaigns Admin Panel\n            </Typography>\n            <Typography variant=\"body2\" color=\"inherit\" className={classes.emailDisplay}>\n              {user.email}\n            </Typography>\n            <Button color=\"inherit\" onClick={signOut}>Sign out</Button>\n          </Toolbar>\n        </AppBar>\n        <Drawer\n          className={classes.drawer}\n          variant=\"permanent\"\n          classes={{\n            paper: classes.drawerPaper,\n          }}\n        >\n          <div className={classes.toolbar} />\n          <List>\n            <ListItem\n              button\n              component={Link}\n              to={`${url}/campaigns`}\n              selected={isCampaigns}\n            >\n              <ListItemIcon><DraftsIcon /></ListItemIcon>\n              <ListItemText primary=\"Campaigns\" />\n            </ListItem>\n          </List>\n        </Drawer>\n        <main className={classes.content}>\n          <div className={classes.toolbar} />\n          <Switch>\n            <Route exact path={path}>\n              <h3>Please select a topic.</h3>\n            </Route>\n            <Route path={`${path}/campaigns`}>\n              <Campaigns />\n            </Route>\n          </Switch>\n        </main>\n      </div>\n    </>\n  );\n}\n\nexport default withStyles(styles)(Admin);\n","import firebase from 'firebase';\nimport React, { useEffect } from 'react';\nimport StyledFirebaseAuth from 'react-firebaseui/StyledFirebaseAuth';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport useAuth from '../contexts/useAuth';\n\nconst uiConfig = {\n  signInFlow: 'redirect',\n  signInOptions: [\n    {\n      provider: firebase.auth.EmailAuthProvider.PROVIDER_ID,\n      signInMethod: firebase.auth.EmailAuthProvider.EMAIL_LINK_SIGN_IN_METHOD,\n    },\n  ],\n};\n\nexport default function Login() {\n  const history = useHistory();\n  const location = useLocation();\n  const [user] = useAuth();\n\n  const { from } = location.state || { from: { pathname: '/admin' } };\n\n  useEffect(() => {\n    if (!user) return;\n\n    history.replace(from);\n  }, [user, history, from]);\n\n  return (\n    <div>\n      <StyledFirebaseAuth uiConfig={uiConfig} firebaseAuth={firebase.auth()} />\n    </div>\n  );\n}\n","import React from 'react';\nimport {\n  HashRouter as Router, Redirect, Route, Switch,\n} from 'react-router-dom';\nimport App from './App';\nimport Admin from './components/Admin';\nimport Login from './components/Login';\nimport { AuthProvider } from './contexts/AuthContext';\nimport useAuth from './contexts/useAuth';\n\nexport default function AdminApp() {\n  return (\n    <Router>\n      <AuthProvider>\n        <div>\n          <Switch>\n            <Route path=\"/login\">\n              <Login />\n            </Route>\n            <PrivateRoute path=\"/admin\">\n              <Admin />\n            </PrivateRoute>\n            <Route path=\"/\">\n              <App />\n            </Route>\n          </Switch>\n        </div>\n      </AuthProvider>\n    </Router>\n  );\n}\n\nfunction PrivateRoute({ children, ...rest }) {\n  const [user] = useAuth();\n\n  return (\n    <Route\n      {...rest}\n      render={({ location }) => (user ? (\n        children\n      ) : (\n        <Redirect\n          to={{\n            pathname: '/login',\n            state: { from: location },\n          }}\n        />\n      ))\n      }\n    />\n  );\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import 'core-js';\nimport firebase from 'firebase';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport AdminApp from './AdminApp';\nimport './index.css';\nimport * as serviceWorker from './serviceWorker';\n\nconst config = {\n  apiKey: 'AIzaSyCnK8Xx45B2IoKySAMpT4KKxZzTM39U7XM',\n  authDomain: 'email-contact-6bf7d.firebaseapp.com',\n  databaseURL: 'https://email-contact-6bf7d.firebaseio.com',\n  projectId: 'email-contact-6bf7d',\n  storageBucket: 'email-contact-6bf7d.appspot.com',\n  messagingSenderId: '414763126743',\n  appId: '1:414763126743:web:33459f34cf73e670934592',\n  measurementId: 'G-7B7J7X44VR',\n};\nfirebase.initializeApp(config);\n\nReactDOM.render(<AdminApp />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\n// serviceWorker.register();\nserviceWorker.unregister();\n","module.exports = __webpack_public_path__ + \"static/media/gmail.2db0d88c.ico\";","module.exports = __webpack_public_path__ + \"static/media/outlook.759fade9.ico\";","module.exports = __webpack_public_path__ + \"static/media/yahoo.9796ed78.ico\";"],"sourceRoot":""}